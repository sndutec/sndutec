(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"5af8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row q-col-gutter-sm"},[n("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[n("q-card",{},[n("q-card-section",{staticClass:"text-center text-h6"},[n("q-icon",{staticClass:"q-mr-sm",attrs:{name:"history"}}),e._v("\n        Historial de Ventas\n      ")],1)],1),n("q-table",{attrs:{title:"Historico Ventas",data:e.dataHistory,columns:e.columns,"row-key":"name",pagination:e.pagination,filter:e.filter},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("ButtonExportExcel",{attrs:{myName:"Historico de Ventas SNB&S",myWorksheet:"Histórico de Compras",myData:e.dataHistory,myExportFields:{"Fecha de Venta":"fechaHoraOrdenVenta","Publicación":"tituloPublicacion",Cantidad:"cantidad",Total:"totalVenta",Estado:"estadoOrdenVenta"}}}),n("q-btn",{attrs:{round:"",color:"green",icon:"refresh"},on:{click:e.getHistorySales}}),n("q-space"),n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"idOrdenVenta",attrs:{props:t}},[e._v("\n            "+e._s(t.row.idOrdenVenta)+"\n          ")]),n("q-td",{key:"fechaHoraOrdenVenta",attrs:{props:t}},[e._v("\n            "+e._s(t.row.fechaHoraOrdenVenta)+"\n          ")]),n("q-td",{key:"tituloPublicacion",attrs:{props:t}},[e._v("\n            "+e._s(t.row.tituloPublicacion)+"\n          ")]),n("q-td",{key:"comprador",attrs:{props:t}},[e._v("\n            "+e._s(t.row.comprador)+"\n          ")]),n("q-td",{key:"cantidad",attrs:{props:t}},[e._v("\n            "+e._s(t.row.cantidad)+"\n          ")]),n("q-td",{key:"totalVenta",attrs:{props:t}},[e._v("\n            "+e._s(t.row.totalVenta)+"\n          ")]),n("q-td",{key:"estadoOrdenVenta",attrs:{props:t}},[e._v("\n            "+e._s(t.row.estadoOrdenVenta)+"\n          ")]),n("q-td",{key:"actions",attrs:{props:t}},["Pendiente"==t.row.estadoOrdenVenta?[n("q-btn",{attrs:{color:"positive",label:"Aprobar",size:"sm",flat:"",dense:""},on:{click:function(n){return e.approve(t.row)}}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{color:"negative",label:"Rechazar",size:"sm",flat:"",dense:""},on:{click:function(n){return e.reject(t.row)}}})]:e._e()],2)],1)]}}])})],1)])},a=[],o=n("ded3"),s=n.n(o),i=n("c973"),c=n.n(i),l=(n("96cf"),n("f15b")),u=n("2f62"),d=n("b4a6"),p={components:{ButtonExportExcel:d["a"]},data:function(){return{dataHistory:[],columns:[{name:"idOrdenVenta",label:"Id",field:"idOrdenVenta"},{name:"fechaHoraOrdenVenta",label:"Fecha de Venta",field:"fechaHoraOrdenVenta"},{name:"tituloPublicacion",label:"Publicación",field:"tituloPublicacion"},{name:"comprador",label:"Comprador",field:"comprador"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"totalVenta",label:"Total",field:"totalVenta"},{name:"estadoOrdenVenta",label:"Estado",field:"estadoOrdenVenta"},{name:"actions",label:"Acciones",field:"actions"}],pagination:{rowsPerPage:15},filter:"",show_dialog:!1,formTitle:""}},mounted:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHistorySales();case 2:case"end":return t.stop()}}),t)})))()},computed:s()({},Object(u["c"])("auth",["user"])),methods:{getHistorySales:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].GetHistorySalesByIdSeller(parseInt(e.user.idUser));case 3:e.dataHistory=t.sent,console.log(e.dataHistory),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},approve:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e),t.$q.dialog({title:"Confirmar",dark:!0,message:"Seguro que quieres Aprobar la Venta?",cancel:!0,persistent:!0}).onOk(c()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.$q.loading.show(),n.next=4,l["a"].AprovveSale({idSaleOrder:e.idOrdenVenta,idBuyOrder:e.idOrdenCompra});case 4:return t.$q.notify({type:"positive",position:"center",message:"Venta Aprobada Exitosamente..."}),n.next=7,t.getHistorySales();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),t.$q.notify({type:"negative",position:"center",message:"Error Interno, Intente mas Tarde"});case 12:return n.prev=12,t.$q.loading.hide(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})))).onOk((function(){})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){}));case 2:case"end":return n.stop()}}),n)})))()},reject:function(e){var t=this;return c()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e),t.$q.dialog({title:"Confirmar",dark:!0,message:"Seguro que quieres Rechazar la Venta?",cancel:!0,persistent:!0}).onOk(c()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.$q.loading.show(),n.next=4,l["a"].RejectSale({idSaleOrder:e.idOrdenVenta,idBuyOrder:e.idOrdenCompra});case 4:return t.$q.notify({type:"positive",position:"center",message:"Venta Rechzada Exitosamente..."}),n.next=7,t.getHistorySales();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),t.$q.notify({type:"negative",position:"center",message:"Error Interno, Intente mas Tarde"});case 12:return n.prev=12,t.$q.loading.hide(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})))).onOk((function(){})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){}));case 2:case"end":return n.stop()}}),n)})))()}}},f=p,m=n("42e1"),y=n("f09f"),h=n("a370"),g=n("0016"),v=n("eaac"),w=n("9c40"),b=n("2c91"),x=n("27f9"),k=n("bd08"),S=n("db86"),q=n("eebe"),O=n.n(q),V=Object(m["a"])(f,r,a,!1,null,null,null);t["default"]=V.exports;O()(V,"components",{QCard:y["a"],QCardSection:h["a"],QIcon:g["a"],QTable:v["a"],QBtn:w["a"],QSpace:b["a"],QInput:x["a"],QTr:k["a"],QTd:S["a"]})},b4a6:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("download-excel",{attrs:{worksheet:e.myWorksheet,name:e.myName,data:e.myData,"export-fields":e.myExportFields}},[n("q-btn",{attrs:{round:"",color:"primary",icon:"download"}})],1)},a=[],o={props:{myWorksheet:String,myName:String,myData:{type:Array,default:function(){return[]}},myExportFields:{type:Object,default:function(){return[]}},created:function(){console.log(JSON.parse(JSON.stringify(this.myExportFields)))}}},s=o,i=n("42e1"),c=n("9c40"),l=n("eebe"),u=n.n(l),d=Object(i["a"])(s,r,a,!1,null,"e4bf5a7a",null);t["a"]=d.exports;u()(d,"components",{QBtn:c["a"]})},f15b:function(e,t,n){"use strict";var r=n("c973"),a=n.n(r),o=(n("96cf"),n("758b"));function s(e){return i.apply(this,arguments)}function i(){return i=a()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].post("/SaleOrders/AddSale",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=a()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].get("/SaleOrders/GetHistorySalesByIdSeller?idSeller=".concat(encodeURIComponent(t)));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=a()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].post("/SaleOrders/AprovveSale",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=a()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].post("/SaleOrders/RejectSale",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}t["a"]={addSale:s,GetHistorySalesByIdSeller:c,AprovveSale:u,RejectSale:p}}}]);